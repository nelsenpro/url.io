let urlDatabase={};function generateShortUrl(){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let r=0;r<6;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function shortenUrl(){let e=document.getElementById("longUrlInput").value;if(!isValidUrl(e)){alert("Please enter a valid URL!");return}let t=generateShortUrl();urlDatabase[t]={longUrl:e,clicks:0};let r=document.getElementById("shortUrlDisplay"),n=document.createElement("p");n.innerHTML=`Your shortened URL is: <a href="#" onclick="redirectToLongUrl('${t}')">http://nelsen/${t}</a>`,r.appendChild(n);let a=createButton("Copy URL",()=>{copyToClipboard(`http://nelsen/${t}`)});r.appendChild(a);let l=createButton("Share URL",()=>{shareURL(`http://nelsen/${t}`)});r.appendChild(l);let o=document.createElement("img");o.src=`https://api.qrserver.com/v1/create-qr-code/?data=http://nelsen/${t}`,o.alt="QR Code",o.classList.add("qr-code"),r.appendChild(o)}function redirectToLongUrl(e){let t=urlDatabase[e]?.longUrl;t?(urlDatabase[e].clicks++,window.open(t,"_blank")):alert("URL not found!")}function isValidUrl(e){try{return new URL(e),!0}catch(t){return!1}}function createButton(e,t){let r=document.createElement("button");return r.textContent=e,r.onclick=t,r}function copyToClipboard(e){navigator.clipboard.writeText(e).then(()=>{alert("URL copied to clipboard!")}).catch(e=>{console.error("Failed to copy URL: ",e)})}function shareURL(e){alert(`Share on Platform: ${e}`)}window.addEventListener("beforeunload",function(){localStorage.setItem("urlDatabase",JSON.stringify(urlDatabase))}),window.addEventListener("load",function(){let e=localStorage.getItem("urlDatabase");e&&(urlDatabase=JSON.parse(e))});